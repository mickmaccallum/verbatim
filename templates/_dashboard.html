{{ define "title" }}Dashboard{{ end }}

{{ define "content" }}

<!-- Maybe use http://getbootstrap.com/css/#tables-contextual-classes to indicate what networks are experiencing problems  -->
<div class="table-responsive panel panel-default">
  <div class="panel-heading">Current Networks</div>

  <table class="table table-hover" id="network-selection-table">
    <thead>
      <tr>
        <th>#</th>
        <th>Network Name</th>
        <th>Port</th>
        <th>Captioner Timeout (seconds)</th>
        <th>Status</th>
        <th>
          &nbsp;
        </th>
      </tr>
    </thead>

    <form id="delete-network-form" method="POST" accept-charset="UTF-8">
      {{ $.csrfField }}

      <tbody>
      {{ range $index, $element := .Networks }}
        <tr data-network-id="{{ $element.ID }}" 
          data-network-name="{{ $element.Name }}">

          <th class="col-xl-1 col-lg-1 col-md-1 row-number" scope=row>{{ inc $index }}</th>
          <td class="col-xl-3 col-lg-3 col-md-3">{{ $element.Name }}</td>
          <td class="col-xl-2 col-lg-2 col-md-2">{{ $element.ListeningPort }}</td>
          <td class="col-xl-3 col-lg-3 col-md-3">{{ $element.Timeout }}</td>
          <td class="col-xl-2 col-lg-2 col-md-2 state-row">{{ networkStatus $element.State }}</td>
          <td class="col-xl-1 col-lg-1 col-md-1">
            <p data-placement="top" data-toggle="tooltip" title="Delete">
              <button class="btn btn-danger btn-xs pull-right delete-button"
                data-title="Delete" data-toggle="modal" 
                data-target="#delete">
                
                <span class="glyphicon glyphicon-trash"></span>
              </button>
            </p>
          </td>
        </tr>
      {{ end }}
      </tbody>
    </form>
  </table>
</div>

<div class="page-header">
  <h3>Add a Network</h3>
</div>

<div>
  <div class="row">
    <form id="add-network-form" method="POST" accept-charset="UTF-8">
      {{ $.csrfField }}

      <!-- <input id="add-network-element" type="hidden" class="form-control"> -->
      <div class="col-lg-4 col-md-4 col-sm-4">
        <div class="input-group">
          <span class="input-group-addon">
            Name
          </span>

          <input name="name" id="network-form-name" type="text" class="form-control" placeholder="C-SPAN">
        </div>
      </div>

      <!-- <input id="add-network-element" type="hidden" class="form-control"> -->
      <div class="col-lg-3 col-md-3 col-sm-3">
        <div class="input-group">
          <span class="input-group-addon">
            Port
          </span>

          <input name="listening_port" id="network-form-port" type="text" class="form-control" placeholder="4000">
        </div>
      </div>

      <div class="col-lg-5 col-md-5 col-sm-5">
        <div class="input-group">
          <span class="input-group-addon">
            Timeout (seconds)
          </span>

          <input name="timeout" id="network-form-timeout" type="text" class="form-control" placeholder="300">

          <span class="input-group-btn">
            <button id="submit-network" class="btn btn-default" type="button">Add Network</button>
          </span>
        </div>
      </div>
    </form>
  </div>
</div>

{{ end }}

{{ define "scripts" }}
<script>
  var socketURL = "{{ .SocketURL }}";
</script>
<script src="/js/websocket.js"></script>
<script src="/js/dashboard.js"></script>
{{ end }}
